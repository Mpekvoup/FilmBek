{% extends 'base.html' %}
{% load static %}

{% block title %}
  Cinemania - Все фильмы
{% endblock %}

{% block content %}
<main class="main-content">
  <nav class="filter-links" aria-label="Фильтры для поиска фильмов">
    <div class="filter-item">
      <div class="filter-header">
        <label for="genre">Жанр:</label>
        <button type="button" onclick="toggleSubfilters(this)" class="toggle-icon">&#9660;</button>
      </div>
      <div class="subfilters" id="genre">
        <a href="{% url 'filtered-films' 'genre' 'all' %}">Все жанры</a>
        <a href="{% url 'filtered-films' 'genre' 'boevik' %}">Боевик</a>
        <a href="{% url 'filtered-films' 'genre' 'komediya' %}">Комедия</a>
        <a href="{% url 'filtered-films' 'genre' 'drama' %}">Драма</a>
        <a href="{% url 'filtered-films' 'genre' 'fentezi' %}">Фэнтези</a>
        <a href="{% url 'filtered-films' 'genre' 'horror' %}">Ужасы</a>
        <a href="{% url 'filtered-films' 'genre' 'fantastika' %}">Фантастика</a>
        <a href="{% url 'filtered-films' 'genre' 'nauchnaya-fantastika'%}">Научная Фантастика</a>
        <a href="{% url 'filtered-films' 'genre' 'triller' %}">Триллер</a>
        <a href="{% url 'filtered-films' 'genre' 'kriminal' %}">Криминал</a>
        <a href="{% url 'filtered-films' 'genre' 'detektiv' %}">Детектив</a>
      </div>
    </div>
    <div class="filter-item">
      <div class="filter-header">
        <label for="year">Год выпуска:</label>
        <button type="button" onclick="toggleSubfilters(this)" aria-controls="year" class="toggle-icon">&#9660;</button>
      </div>
      <div class="subfilters" id="year">
        <a href="{% url 'filtered-films' 'year' 'all' %}">Все годы</a>
        <a href="{% url 'filtered-films' 'year' 'before-1990' %}">До 1990</a>
        <a href="{% url 'filtered-films' 'year' '1990-2000' %}">1990-2000</a>
        <a href="{% url 'filtered-films' 'year' '2000-2010' %}">2000-2010</a>
        <a href="{% url 'filtered-films' 'year' '2010-2020' %}">2010-2020</a>
        <a href="{% url 'filtered-films' 'year' '2020-2025' %}">2020-2025</a>
      </div>
    </div>
    <div class="filter-item">
      <div class="filter-header">
        <label for="country">Страна:</label>
        <button type="button" onclick="toggleSubfilters(this)" aria-controls="country" class="toggle-icon">&#9660;</button>
      </div>
      <div class="subfilters" id="country">
        <a href="{% url 'filtered-films' 'country' 'all' %}">Все страны</a>
        <a href="{% url 'filtered-films' 'country' 'usa' %}">США</a>
        <a href="{% url 'filtered-films' 'country' 'uk' %}">Великобритания</a>
        <a href="{% url 'filtered-films' 'country' 'yuzhnaya-koreya' %}">Южная Корея</a>
        <a href="{% url 'filtered-films' 'country' 'japan' %}">Япония</a>
        <a href="{% url 'filtered-films' 'country' 'avstraliya' %}">Австралия</a>
      </div>
    </div>
    <div class="filter-item">
      <div class="filter-header">
        <label for="content-type">Тип контента:</label>
        <button type="button" onclick="toggleSubfilters(this)" aria-controls="content-type" class="toggle-icon">&#9660;</button>
      </div>
      <div class="subfilters" id="content-type">
        <a href="{% url 'filtered-films' 'content-type' 'all' %}">Все типы</a>
        <a href="{% url 'AllFilms_page' %}">Фильмы</a>
        <a href="{% url 'AllSerials_page' %}">Сериалы</a>
        <a href="{% url 'AllSerials_page'%}">Аниме</a>
        <a href="{% url 'filtered-films' 'content-type' 'documentary' %}">Документальные</a>
      </div>
    </div>
    <div class="filter-item">
      <div class="filter-header">
        <label for="imdb-rating">Рейтинг IMDb:</label>
        <button type="button" onclick="toggleSubfilters(this)" aria-controls="imdb-rating" class="toggle-icon">&#9660;</button>
      </div>
      <div class="subfilters" id="imdb-rating">
        <a href="{% url 'filtered-films' 'rating' 'all' %}">Все рейтинги</a>
        <a href="{% url 'filtered-films' 'rating' '9-10' %}">9-10</a>
        <a href="{% url 'filtered-films' 'rating' '8-9' %}">8-9</a>
        <a href="{% url 'filtered-films' 'rating' '7-8' %}">7-8</a>
        <a href="{% url 'filtered-films' 'rating' '6-7' %}">6-7</a>
        <a href="{% url 'filtered-films' 'rating' '5-6' %}">5-6</a>
        <a href="{% url 'filtered-films' 'rating' 'below-5' %}">Ниже 5</a>
      </div>
    </div>
    <div class="filter-item">
      <div class="filter-header">
        <label for="age-rating">Возрастной рейтинг:</label>
        <button type="button" onclick="toggleSubfilters(this)" aria-controls="age-rating" class="toggle-icon">&#9660;</button>
      </div>
      <div class="subfilters" id="age-rating">
        <a href="{% url 'filtered-films' 'age-rating' 'all' %}">Все</a>
        <a href="{% url 'filtered-films' 'age-rating' '0' %}">0+</a>
        <a href="{% url 'filtered-films' 'age-rating' '6' %}">6+</a>
        <a href="{% url 'filtered-films' 'age-rating' '12' %}">12+</a>
        <a href="{% url 'filtered-films' 'age-rating' '16' %}">16+</a>
        <a href="{% url 'filtered-films' 'age-rating' '18' %}">18+</a>
      </div>
    </div>
  </nav>
  <section class="movies-section" aria-label="Список фильмов">
    <div class="slidere">
      <div class="liste">
        {% for film in films %}
        
          <a href="{% url 'movie-detail' pk=film.pk %}" class="movie-link" aria-label="Подробнее о фильме {{ film.name }}">
            <div class="movie-card">
              <img src="{{ film.image_url }}" alt="{{ film.name }}" class="movie-poster" loading="lazy" />
              <div class="movie-info">
                <h3 class="movie-title">{{ film.name }}</h3>
                <span class="movie-year">
                  {{ film.year }} •
                  {% for genre in film.genres.all %}
                    {{ genre.name }}{% if not forloop.last %}, {% endif %}
                  {% endfor %}
                </span>
                <div class="rating" aria-label="Рейтинг фильма">★ {{ film.rating }}/10</div>
              </div>
            </div>
          </a>
        {% empty %}
          <p>Фильмы по заданным фильтрам не найдены.</p>
        {% endfor %}
      </div>
    </div>
  </section>
</main>
{% endblock %}